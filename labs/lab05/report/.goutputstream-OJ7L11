---
## Front matter
title: "Отчет по лабораторной работе №5"
subtitle: "Дисциплина: Операционные системы"
author: "Евгения Александровна Шошина"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Ознакомление с файловой системой Linux, её структурой, именами и содержанием каталогов. Приобретение практических навыков по применению команд для работы с файлами и каталогами, по управлению процессами (и работами), по проверке использования диска и обслуживанию файловой системы.

# Задание

1. Выполните все примеры, приведённые в первой части описания лабораторной работы.

2. Выполните следующие действия, зафиксировав в отчёте по лабораторной работе используемые при этом команды и результаты их выполнения:
- 2.1. Скопируйте файл /usr/include/sys/io.h в домашний каталог и назовите его equipment. Если файла io.h нет, то используйте любой другой файл в каталоге /usr/include/sys/ вместо него.
- 2.2. В домашнем каталоге создайте директорию ~/ski.plases.
- 2.3. Переместите файл equipment в каталог ~/ski.plases.
- 2.4. Переименуйте файл ~/ski.plases/equipment в ~/ski.plases/equiplist.
- 2.5. Создайте в домашнем каталоге файл abc1 и скопируйте его в каталог ~/ski.plases, назовите его equiplist2.
- 2.6. Создайте каталог с именем equipment в каталоге ~/ski.plases.
- 2.7. Переместите файлы ~/ski.plases/equiplist и equiplist2 в каталог ~/ski.plases/equipment.
- 2.8. Создайте и переместите каталог ~/newdir в каталог ~/ski.plases и назовите его plans.

3. Определите опции команды chmod, необходимые для того, чтобы присвоить перечисленным ниже файлам выделенные права доступа, считая, что в начале таких прав нет:
- 3.1. drwxr--r-- ... australia
- 3.2. drwx--x--x ... play
- 3.3. -r-xr--r-- ... my_os
- 3.4. -rw-rw-r-- ... feathers
При необходимости создайте нужные файлы.

4. Проделайте приведённые ниже упражнения, записывая в отчёт по лабораторной
работе используемые при этом команды:
- 4.1. Просмотрите содержимое файла /etc/password.
- 4.2. Скопируйте файл ~/feathers в файл ~/file.old.
- 4.3. Переместите файл ~/file.old в каталог ~/play.
- 4.4. Скопируйте каталог ~/play в каталог ~/fun.
- 4.5. Переместите каталог ~/fun в каталог ~/play и назовите его games.
- 4.6. Лишите владельца файла ~/feathers права на чтение.
- 4.7. Что произойдёт, если вы попытаетесь просмотреть файл ~/feathers командой cat?
- 4.8. Что произойдёт, если вы попытаетесь скопировать файл ~/feathers?
- 4.9. Дайте владельцу файла ~/feathers право на чтение.
- 4.10. Лишите владельца каталога ~/play права на выполнение.
- 4.11. Перейдите в каталог ~/play. Что произошло?
- 4.12. Дайте владельцу каталога ~/play право на выполнение.

5. Прочитайте man по командам mount, fsck, mkfs, kill и кратко их охарактеризуйте, приведя примеры.

# Теоретическое введение

###### Для создания текстового файла можно использовать команду touch.
Формат команды:
- touch имя-файла

###### Для просмотра файлов небольшого размера можно использовать команду cat.
Формат команды:
- cat имя-файла

###### Для просмотра файлов постранично удобнее использовать команду less.
Формат команды:
- less имя-файла

###### Следующие клавиши используются для управления процессом просмотра:
- Space — переход к следующей странице,
- ENTER — сдвиг вперёд на одну строку,
- b — возврат на предыдущую страницу,
- h — обращение за подсказкой,
- q — выход из режима просмотра файла.

###### Команда head выводит по умолчанию первые 10 строк файла.
Формат команды:
- head [-n] имя-файла, где n — количество выводимых строk

###### Команда tail выводит умолчанию 10 последних строк файла.
Формат команды:
- tail [-n] имя-файла, где n — количество выводимых строк.

###### 5.2.2. Копирование файлов и каталогов

Команда cp используется для копирования файлов и каталогов.
Формат команды:
- cp [-опции] исходный_файл целевой_файл

Примеры:
1. Копирование файла в текущем каталоге. Скопировать файл ~/abc1 в файл april и в файл may:
- cd
- touch abc1
- cp abc1 april
- cp abc1 may

2. Копирование нескольких файлов в каталог. Скопировать файлы april и may в каталог monthly:
- mkdir monthly
- cp april may monthly

3. Копирование файлов в произвольном каталоге. Скопировать файл monthly/may в файл с именем june:
- cp monthly/may monthly/june
- ls monthly

###### Опция i в команде cp выведет на экран запрос подтверждения о перезаписи файла.
Для рекурсивного копирования каталогов, содержащих файлы, используется команда cp с опцией r.

Примеры:
1. Копирование каталогов в текущем каталоге. Скопировать каталог monthly в каталог monthly.00:
- mkdir monthly.00
- cp -r monthly monthly.00

2. Копирование каталогов в произвольном каталоге. Скопировать каталог monthly.00 в каталог /tmp
- cp -r monthly.00 /tmp

###### 5.2.3. Перемещение и переименование файлов и каталогов
Команды mv и mvdir предназначены для перемещения и переименования файлов и каталогов.

###### Формат команды mv
mv [-опции] старый_файл новый_файл

Примеры:
1. Переименование файлов в текущем каталоге. Изменить название файла april на july в домашнем каталоге:
- cd
- mv april july

2. Перемещение файлов в другой каталог. Переместить файл july в каталог monthly.00:
- mv july monthly.00
- ls monthly.00

Результат:
- april july june may
Если необходим запрос подтверждения о перезаписи файла, то нужно использовать
опцию i.

3. Переименование каталогов в текущем каталоге. Переименовать каталог monthly.00 в monthly.01
- mv monthly.00 monthly.01

4. Перемещение каталога в другой каталог. Переместить каталог monthly.01в каталог reports:
- mkdir reports
- mv monthly.01 reports

5. Переименование каталога, не являющегося текущим. Переименовать каталог reports/monthly.01 в reports/monthly:
- mv reports/monthly.01 reports/monthly

###### 5.2.4. Права доступа
Каждый файл или каталог имеет права доступа (табл. 5.1).

В сведениях о файле или каталоге указываются:
- тип файла (символ (-) обозначает файл, а символ (d) — каталог);
- права для владельца файла (r — разрешено чтение, w — разрешена запись, x — разрешено выполнение, - — право доступа отсутствует);
- права для членов группы (r — разрешено чтение, w — разрешена запись, x — разрешено выполнение, - — право доступа отсутствует);
- права для всех остальных (r — разрешено чтение, w — разрешена запись, x — разрешено выполнение, - — право доступа отсутствует).

Примеры:

    Право                 Обозначение                           Файл                                                         Каталог

    Чтение                    r             Разрешены просмотр и копирование                            Разрешён просмотр списка входящих файлов
    Запись                    w             Разрешены изменение и переименование                        Разрешены создание и удаление файлов
    Выполнение                x             Разрешено выполнение файла (скриптов и/или программ)        Разрешён доступ в каталог и есть возможность сделать его текущим


1. Для файла (крайнее левое поле имеет значение -) владелец файла имеет право на чтение и запись (rw-), группа, в которую входит владелец файла, может читать файл (r--), все остальные могут читать файл (r--):
- -rw-r--r--

2. Только владелец файла имеет право на чтение, изменение и выполнение файла:
- -rwx------

3. Владелец каталога (крайнее левое поле имеет значение d) имеет право на просмотр, изменение и доступа в каталог, члены группы могут входить и просматривать его, все остальные — только входить в каталог:
- drwxr-x--x

###### 5.2.5. Изменение прав доступа

Права доступа к файлу или каталогу можно изменить, воспользовавшись командой chmod. Сделать это может владелец файла (или каталога) или пользователь с правами администратора.

Формат команды:
- chmod режим имя_файла

Режим (в формате команды) имеет следующие компоненты структуры и способ записи:
- = установить право
- - лишить права
- + дать право
- r чтение
- w запись
- x выполнение
- u (user) владелец файла
- g (group) группа, к которой принадлежит владелец файла
- o (others) все остальные

В работе с правами доступа можно использовать их цифровую запись (восьмеричное значение) вместо символьной (табл. 5.2).

Таблица 5.2

Формы              записи       прав доступа
Двоичная        Восьмеричная     Символьная
111                 7               rwx
110                 6               rw-
101                 5               r-x
100                 4               r--
011                 3               -wx
010                 2               -w-
001                 1               --x
000                 0               ---

Примеры:
1. Требуется создать файл ~/may с правом выполнения для владельца:
- 1 cd
- 2 touch may
- 3 ls -l may
- 4 chmod u+x may
- 5 ls -l may

2. Требуется лишить владельца файла ~/may права на выполнение:
- 1 chmod u-x may
- 2 ls -l may

3. Требуется создать каталог monthly с запретом на чтение для членов группы и всех
остальных пользователей:
- 1 cd
- 2 mkdir monthly
- 3 chmod g-r, o-r monthly

4. Требуется создать файл ~/abc1 с правом записи для членов группы:
- 1 cd
- 2 touch abc1
- 3 chmod g+w abc1

###### 5.2.6. Анализ файловой системы

Файловая система в Linux состоит из фалов и каталогов. Каждому физическому носителю соответствует своя файловая система.
Существует несколько типов файловых систем. Перечислим наиболее часто встречающиеся типы:
-  ext2fs (second extended filesystem);
-  ext2fs (third extended file system);
- ext4 (fourth extended file system);
- ReiserFS;
- xfs;
- fat (file allocation table);
- ntfs (new technology file system).

Для просмотра используемых в операционной системе файловых систем можно воспользоваться командой mount без параметров. В результате её применения можно получить примерно следующее:
- 1 mount
- 2
- 3 proc on /proc type proc (rw)
- 4 sysfs on /sys type sysfs (rw,nosuid,nodev,noexec)
- 5 udev on /dev type tmpfs (rw,nosuid)
- 6 devpts on /dev/pts type devpts (rw,nosuid,noexec)
- 7 /dev/sda1 on /mnt/a type ext3 (rw,noatime)
- 8 /dev/sdb2 on /mnt/docs type reiserfs (rw,noatime)
- 9 shm on /dev/shm type tmpfs (rw,noexec,nosuid,nodev)
- 10 usbfs on /proc/bus/usb type usbfs
- 11 (rw,noexec,nosuid,devmode=0664,devgid=85)
- 12 binfmt_misc on /proc/sys/fs/binfmt_misc type binfmt_misc
- 13 (rw,noexec,nosuid,nodev)
- 14 nfsd on /proc/fs/nfs type nfsd (rw,noexec,nosuid,nodev)
- 15

В данном случае указаны имена устройств, названия соответствующих им точек монтирования (путь), тип файловой системы и параметрами монтирования.
В контексте команды mount устройство — специальный файл устройства, с помощью которого операционная система получает доступ к аппаратному устройству. Файлы устройств обычно располагаются в каталоге /dev, имеют сокращённые имена (например,
sdaN, sdbN или hdaN, hdbN, где N — порядковый номер устройства, sd — устройства SCSI, hd — устройства MFM/IDE).

Точка монтирования — каталог (путь к каталогу), к которому присоединяются файлы устройств.
Другой способ определения смонтированных в операционной системе файловых систем — просмотр файла/etc/fstab. Сделать это можно например с помощью команды cat:
- 1 cat /etc/fstab
- 2
- 3 /dev/hda1 / ext2 defaults 1 1
- 4 /dev/hda5 /home ext2 defaults 1 2
- 5 /dev/hda6 swap swap defaults 0 0
- 6 /dev/hdc /mnt/cdrom auto umask=0,user,noauto,ro,exec,users 0 0
none /mnt/floppy supermount dev=/dev/fd0,fs=ext2:vfat,--,
- 8 sync,umask=0 0 0
- 9 none /proc proc defaults 0 0
- 10 none /dev/pts devpts mode=0622 0 0

В каждой строке этого файла указано:
- имя устройство;
- точка монтирования;
- тип файловой системы;
- опции монтирования;
- специальные флаги для утилиты dump;
- порядок проверки целостности файловой системы с помощью утилиты fsck.

Для определения объёма свободного пространства на файловой системе можно воспользоваться командой df, которая выведет на экран список всех файловых систем в соответствии с именами устройств, с указанием размера и точки монтирования. Например:
- 1 df
- 2
- 3 Filesystem 1024-blocks Used Available Capacity Mounted on
- 4 /dev/hda3 297635 169499 112764 60% /

С помощью команды fsck можно проверить (а в ряде случаев восстановить) целостность файловой системы:
Формат команды:
- 1 fsck имя_устройства

Пример:
- 1 fsck /dev/sda1

# Выполнение лабораторной работы

1. Выполните все примеры, приведённые в первой части описания лабораторной работы.

![Название рисунка]()

2. Выполните следующие действия, зафиксировав в отчёте по лабораторной работе используемые при этом команды и результаты их выполнения:
- 2.1. Скопируйте файл /usr/include/sys/io.h в домашний каталог и назовите его equipment. Если файла io.h нет, то используйте любой другой файл в каталоге /usr/include/sys/ вместо него.

![Название рисунка]()

- 2.2. В домашнем каталоге создали директорию ~/ski.plases.

![Создание директорию ~/ski.plases]()

- 2.3. Переместили файл equipment в каталог ~/ski.plases.

![Перемещение файла equipment в каталог ~/ski.plases]()

- 2.4. Переименовали файл ~/ski.plases/equipment в ~/ski.plases/equiplist.

![Переименование файла~/ski.plases/equipment в ~/ski.plases/equiplist.]()

- 2.5. Создали в домашнем каталоге файл abc1 и скопировали его в каталог ~/ski.plases, назовите его equiplist2.

![Создание в домашнем каталоге файла abc1 и копирование его в каталог ~/ski.plases, назовите его equiplist2.]()

- 2.6. Создали каталог с именем equipment в каталоге ~/ski.plases.

![Создание каталога с именем equipment в каталоге ~/ski.plases.]()

- 2.7. Переместили файлы ~/ski.plases/equiplist и equiplist2 в каталог ~/ski.plases/equipment.

![Перемещение файлов ~/ski.plases/equiplist и equiplist2 в каталог ~/ski.plases/equipment.]()

- 2.8. Создали и переместили каталог ~/newdir в каталог ~/ski.plases и назовите его plans.

![Создание и перемещение каталога ~/newdir в каталог ~/ski.plases и назовите его plans.]()

3. Определите опции команды chmod, необходимые для того, чтобы присвоить перечисленным ниже файлам выделенные права доступа, считая, что в начале таких прав нет:

- 3.1. drwxr--r-- ... australia

![Определение опции команды chmod]()

- 3.2. drwx--x--x ... play

![Определение опции команды chmod]()

- 3.3. -r-xr--r-- ... my_os

![Определение опции команды chmod]()

- 3.4. -rw-rw-r-- ... feathers

![Определение опции команды chmod]()

При необходимости создайте нужные файлы.

4. Проделали приведённые ниже упражнения, записывая в отчёт по лабораторной работе используемые при этом команды:

- 4.1. Просмотрели содержимое файла /etc/password.

![Просмотр содержимого файла /etc/password.]()

- 4.2. Скопировали файл ~/feathers в файл ~/file.old.

![Копирование файла ~/feathers в файл ~/file.old.]()

- 4.3. Переместили файл ~/file.old в каталог ~/play.

![Перемещение файла ~/file.old в каталог ~/play.]()

- 4.4. Скопировали каталог ~/play в каталог ~/fun.

![Копирование каталога ~/play в каталог ~/fun.]()

- 4.5. Переместили каталог ~/fun в каталог ~/play и назовите его games.

![Перемещение каталога ~/fun в каталог ~/play и назовите его games.]()

- 4.6. Лишили владельца файла ~/feathers права на чтение.

![Лишение владельца файла ~/feathers права на чтение.]()

- 4.7. Что произойдёт, если вы попытаетесь просмотреть файл ~/feathers командой cat?

![Попытка просмотреть файл ~/feathers командой cat]()

- 4.8. Что произойдёт, если вы попытаетесь скопировать файл ~/feathers?

![Попытка скопировать файл ~/feathers]()

- 4.9. Дали владельцу файла ~/feathers право на чтение.

![Владелец файла ~/feathers имеет право на чтение]()

- 4.10. Лишили владельца каталога ~/play права на выполнение.

![Лишение владельца каталога ~/play права на выполнение]()

- 4.11. Перешли в каталог ~/play. Что произошло?

![Переход в каталог ~/play]()

- 4.12. Дали владельцу каталога ~/play право на выполнение.

![Владелец каталога ~/play имеет право на выполнение]()

5. Прочитали man по командам mount, fsck, mkfs, kill и кратко их охарактеризовали, приведя примеры.

![Чтение man по командам mount, fsck, mkfs, kill]()

# Выводы

Ознакомились с файловой системой Linux, её структурой, именами и содержанием каталогов. Приобрели практические навыки по применению команд для работы с файлами и каталогами, по управлению процессами (и работами), по проверке использования диска и обслуживанию файловой системы.

# Контрольные вопросы

1. Дайте характеристику каждой файловой системе, существующей на жёстком диске компьютера, на котором вы выполняли лабораторную работу.
2. Приведите общую структуру файловой системы и дайте характеристику каждой директории первого уровня этой структуры.
- / — root каталог. Содержит в себе всю иерархию системы;
- /bin — здесь находятся двоичные исполняемые файлы. Основные общие команды, хранящиеся отдельно от других программ в системе (прим.: pwd, ls, cat, ps);
- /boot — тут расположены файлы, используемые для загрузки системы (образ initrd, ядро vmlinuz);
- /dev — в данной директории располагаются файлы устройств (драйверов). С помощью этих файлов можно взаимодействовать с устройствами. К примеру, если это жесткий диск, можно подключить его к файловой системе. В файл принтера же можно написать напрямую и отправить задание на печать;
- /etc — в этой директории находятся файлы конфигураций программ. Эти файлы позволяют настраивать системы, сервисы, скрипты системных демонов;
- /home — каталог, аналогичный каталогу Users в Windows. Содержит домашние каталоги учетных записей пользователей (кроме root). При создании нового пользователя здесь создается одноименный каталог с аналогичным именем и хранит личные файлы этого пользователя;
- /lib — содержит системные библиотеки, с которыми работают программы и модули ядра;
- /lost+found — содержит файлы, восстановленные после сбоя работы системы. Система проведет проверку после сбоя и найденные файлы можно будет посмотреть в данном каталоге;
- /media — точка монтирования внешних носителей. Например, когда вы вставляете диск в дисковод, он будет автоматически смонтирован в директорию /media/cdrom;
- /mnt — точка временного монтирования. Файловые системы подключаемых устройств обычно монтируются в этот каталог для временного использования;
- /opt — тут расположены дополнительные (необязательные) приложения. Такие программы обычно не подчиняются принятой иерархии и хранят свои файлы в одном подкаталоге (бинарные, библиотеки, конфигурации);
- /proc — содержит файлы, хранящие информацию о запущенных процессах и о состоянии ядра ОС;
- /root — директория, которая содержит файлы и личные настройки суперпользователя;
- /run — содержит файлы состояния приложений. Например, PID-файлы или UNIX-сокеты;
- /sbin — аналогично /bin содержит бинарные файлы. Утилиты нужны для настройки и администрирования системы суперпользователем;
- /srv — содержит файлы сервисов, предоставляемых сервером (прим. FTP или Apache HTTP);
- /sys — содержит данные непосредственно о системе. Тут можно узнать информацию о ядре, драйверах и устройствах;
- /tmp — содержит временные файлы. Данные файлы доступны всем пользователям на чтение и запись. Стоит отметить, что данный каталог очищается при перезагрузке;
- /usr — содержит пользовательские приложения и утилиты второго уровня, используемые пользователями, а не системой. Содержимое доступно только для чтения (кроме root). Каталог имеет вторичную иерархию и похож на корневой;
- /var — содержит переменные файлы. Имеет подкаталоги, отвечающие за отдельные переменные. Например, логи будут храниться в /var/log, кэш в /var/cache, очереди заданий в /var/spool/ и так далее.

3. Какая операция должна быть выполнена, чтобы содержимое некоторой файловой системы было доступно операционной системе?
- Монтирование тома.

4. Назовите основные причины нарушения целостности файловой системы. Как устранить повреждения файловой системы?
Отсутствие синхронизации между образом файловой системы в памяти и ее данными на диске в случае аварийного останова может привести к появлению следующих ошибок:
-  Один блок адресуется несколькими mode (принадлежит нескольким файлам).
-  Блок помечен как свободный, но в то же время занят (на него ссылается onode).
- Блок помечен как занятый, но в то же время свободен (ни один inode на него не ссылается).
- Неправильное число ссылок в inode (недостаток или избыток ссылающихся записей в каталогах).
- Несовпадение между размером файла и суммарным размером адресуемых inode блоков.
- Недопустимые адресуемые блоки (например, расположенные за пределами файловой системы).
- "Потерянные" файлы (правильные inode, на которые не ссылаются записи каталогов).
- Недопустимые или неразмещенные номера inode в записях каталогов.

5. Как создаётся файловая система?
- mkfs - позволяет создать файловую систему Linux.

6. Дайте характеристику командам для просмотра текстовых файлов.
- Cat - выводит содержимое файла на стандартное устройство вывода

7. Приведите основные возможности команды cp в Linux.
- Cp – копирует или перемещает директорию, файлы.

8. Приведите основные возможности команды mv в Linux.
- Mv - переименовать или переместить файл или директорию.

9. Что такое права доступа? Как они могут быть изменены? При ответах на вопросы используйте дополнительные источники информации по теме.
- Права доступа к файлу или каталогу можно изменить, воспользовавшись командой chmod. Сделать это может владелец файла (или каталога) или пользователь с правами администратора.
